var e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
    return typeof e;
} : function(e) {
    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
};

!function(t) {
    function n() {}
    function o(e, t) {
        return function() {
            e.apply(t, arguments);
        };
    }
    function r(t) {
        if ("object" != e(this)) throw new TypeError("Promises must be constructed via new");
        if ("function" != typeof t) throw new TypeError("not a function");
        this._state = 0, this._handled = !1, this._value = void 0, this._deferreds = [], 
        s(t, this);
    }
    function i(e, t) {
        for (;3 === e._state; ) e = e._value;
        return 0 === e._state ? void e._deferreds.push(t) : (e._handled = !0, void r._immediateFn(function() {
            var n = 1 === e._state ? t.onFulfilled : t.onRejected;
            if (null !== n) {
                var o;
                try {
                    o = n(e._value);
                } catch (e) {
                    return void f(t.promise, e);
                }
                u(t.promise, o);
            } else (1 === e._state ? u : f)(t.promise, e._value);
        }));
    }
    function u(t, n) {
        try {
            if (n === t) throw new TypeError("A promise cannot be resolved with itself.");
            if (n && ("object" == (void 0 === n ? "undefined" : e(n)) || "function" == typeof n)) {
                var i = n.then;
                if (n instanceof r) return t._state = 3, t._value = n, void c(t);
                if ("function" == typeof i) return void s(o(i, n), t);
            }
            t._state = 1, t._value = n, c(t);
        } catch (e) {
            f(t, e);
        }
    }
    function f(e, t) {
        try {
            l(t);
        } catch (e) {}
        e._state = 2, e._value = t, c(e);
    }
    function c(e) {
        2 === e._state && 0 === e._deferreds.length && r._immediateFn(function() {
            e._handled || r._unhandledRejectionFn(e._value);
        });
        for (var t = 0, n = e._deferreds.length; t < n; t++) i(e, e._deferreds[t]);
        e._deferreds = null;
    }
    function a(e, t, n) {
        this.onFulfilled = "function" == typeof e ? e : null, this.onRejected = "function" == typeof t ? t : null, 
        this.promise = n;
    }
    function s(e, t) {
        var n = !1;
        try {
            e(function(e) {
                n || (n = !0, u(t, e));
            }, function(e) {
                n || (n = !0, f(t, e));
            });
        } catch (e) {
            if (n) return;
            n = !0, f(t, e);
        }
    }
    function l(e) {
        if (wx.JDReport && wx.JDReport.reportPromiseErr) {
            var t = d(e);
            t && -1 === p.indexOf(t) && (p.push(t), h = h || setTimeout(function() {
                var e = p;
                clearTimeout(h), h = null, p = [];
                var t = getApp();
                e.forEach(function(e) {
                    t.onError(e);
                });
            }, 200));
        }
    }
    function d(e) {
        if (!e || !e.stack || -1 !== e.stack.indexOf("网络")) return "";
        var t = getCurrentPages();
        return "promiseError: at " + (t && t.length && t[t.length - 1].__route__ || "(can not get path)") + " " + e.stack;
    }
    var h = null, p = [], m = setTimeout;
    r.prototype.catch = function(e) {
        return this.then(null, e);
    }, r.prototype.then = function(e, t) {
        var o = new this.constructor(n);
        return i(this, new a(e, t, o)), o;
    }, r.all = function(t) {
        var n = Array.prototype.slice.call(t);
        return new r(function(t, o) {
            function r(u, f) {
                try {
                    if (f && ("object" == (void 0 === f ? "undefined" : e(f)) || "function" == typeof f)) {
                        var c = f.then;
                        if ("function" == typeof c) return void c.call(f, function(e) {
                            r(u, e);
                        }, o);
                    }
                    n[u] = f, 0 == --i && t(n);
                } catch (e) {
                    o(e);
                }
            }
            if (0 === n.length) return t([]);
            for (var i = n.length, u = 0; u < n.length; u++) r(u, n[u]);
        });
    }, r.resolve = function(t) {
        return t && "object" == (void 0 === t ? "undefined" : e(t)) && t.constructor === r ? t : new r(function(e) {
            e(t);
        });
    }, r.reject = function(e) {
        return new r(function(t, n) {
            n(e);
        });
    }, r.race = function(e) {
        return new r(function(t, n) {
            for (var o = 0, r = e.length; o < r; o++) e[o].then(t, n);
        });
    }, r._immediateFn = "function" == typeof setImmediate && function(e) {
        setImmediate(e);
    } || function(e) {
        m(e, 0);
    }, r._unhandledRejectionFn = function(e) {
        "undefined" != typeof console && console && console.warn("Possible Unhandled Promise Rejection:", e);
    }, r._setImmediateFn = function(e) {
        r._immediateFn = e;
    }, r._setUnhandledRejectionFn = function(e) {
        r._unhandledRejectionFn = e;
    }, "undefined" != typeof module && module.exports ? module.exports = r : t.Promise || (t.Promise = r);
}(void 0);